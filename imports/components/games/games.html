<ion-nav-bar class="bar-stable">
  <ion-nav-back-button>
  </ion-nav-back-button>
    <ion-nav-title>
      Games
    </ion-nav-title>
  <ion-nav-buttons side="left">
    <pre>{{ $ctrl.role }}</pre>
  </ion-nav-buttons>
  <ion-nav-buttons side="right">
    <button ng-hide="$ctrl.inprogress" ng-click="$ctrl.showNewGameModal()" class="button button-clear button-positive button-icon ion-plus-round"></button>
  </ion-nav-buttons>
</ion-nav-bar>

<ion-view view-title="Games">
  <ion-content>
    <game-in-progress ng-show="$ctrl.inprogress" game="$ctrl.inprogress"></game-in-progress>
    <ion-list type="list-inset">
      <ion-item ng-repeat="game in $ctrl.data | orderBy: '-startDate'" class="item-game item-text-wrap" type="item-text-wrap">

        <div class="row">
          <div class="col">
            <h3>{{game.teamRed | team}}</h3>
          </div>
          <div class="col col-center content-center">vs.</div>
          <div class="col">
            <h3>{{game.teamBlue | team}}</h3>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <span class="title score">{{ game.teamRedScore }}</span>
          </div>
          <div class="col col-center content-center"></div>
          <div class="col">
            <span class="title score">{{ game.teamBlueScore }}</span>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <sup>({{ game.winner === game.teamRed._id ? "+" + game.eloChange : "-" + game.eloChange }})</sup>
          </div>
          <div class="col col-center content-center"></div>
          <div class="col">
            <sup>({{ game.winner === game.teamRed._id ? "-" + game.eloChange : "+" + game.eloChange }})</sup>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <sup>Started: {{game.startDate | calendar}}</sup><br/>
            <sup>Duration: {{game.startDate | duration: game.endDate}} minutes</sup>
          </div>
        </div>
        <ion-option-button class="button-assertive" ng-click="$ctrl.remove(game)">
          Delete
        </ion-option-button>

      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>
